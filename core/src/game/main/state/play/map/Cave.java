package game.main.state.play.map;

import game.main.Game;
import game.main.entity.Chest;
import game.main.tile.connected.CaveBridge;
import game.main.tile.connected.CaveHole;
import game.main.tile.connected.CaveWall;
import game.main.tile.unconnected.CaveGround;
import game.main.tile.unconnected.CaveMushroom;

public class Cave extends Map {
    public Cave() {
        minRooms = 13;
        maxRooms = 18;
        ground = CaveGround.class;
        outerWall = CaveWall.class;
        innerWall = CaveHole.class;
        hole = CaveBridge.class;
        chest = Chest.class;
        minMonsters = 2;
        maxMonsters = 5;
        templates = new Template[] {
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', ' ', ' ', '#', '#', '#', '#'},
                        {'#', '#', ' ', ' ', ' ', ' ', ' ', '#', '#', '#'},
                        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
                        {'#', '#', '#', ' ', ' ', ' ', '#', '#', ' ', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', '#', '#'}
                }),
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', ' ', ' ', '#', '#', '#', '#'},
                        {'#', '#', ' ', ' ', ' ', ' ', ' ', '#', '#', '#'},
                        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
                        {'#', '#', '#', ' ', ' ', ' ', '#', '#', ' ', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', '#', '#'}
                }),
                new Template(new char[][] {
                        {'#', '#', '#', '#', ' ', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', ' ', '#'},
                        {'#', '#', '#', '#', '#', ' ', ' ', ' ', ' ', '#'},
                        {'#', ' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' '},
                        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#'},
                        {'#', ' ', '#', '#', ' ', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'}
                }),
                new Template(new char[][] {
                        {'#', '#', '#', '#', ' ', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', ' ', ' ', '#', '#', ' ', '#'},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#'},
                        {' ', ' ', ' ', '+', '.', '+', '+', ' ', ' ', ' '},
                        {' ', ' ', '+', '+', '.', '+', '#', '#', ' ', '#'},
                        {'#', '#', '#', '+', ' ', ' ', '#', '#', ' ', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', ' ', '#', '#', '#', '#', '#'}
                }),
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', '+', '+', '+', '#', '#', '#'},
                        {'#', '#', '#', '+', '+', '+', '+', '+', '#', '#'},
                        {' ', ' ', ' ', ' ', '+', '+', '+', '+', ' ', '#'},
                        {'#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
                        {'#', ' ', '#', '#', ' ', ' ', ' ', ' ', ' ', '#'},
                        {'#', '#', '#', '#', ' ', ' ', ' ', ' ', '#', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', '#', '#'}
                }, Room.Direction.UP),
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', '+', '+', '+', '#', '#', '#'},
                        {'#', '#', 'c', '+', '+', '+', '+', '+', '#', '#'},
                        {' ', ' ', ' ', '+', '+', '+', '+', '+', '+', '#'},
                        {'#', ' ', ' ', '.', '.', ' ', '+', '+', '+', '#'},
                        {'#', ' ', '+', '+', ' ', ' ', ' ', '+', '+', '#'},
                        {'#', '#', '#', '+', '+', ' ', ' ', '+', '#', '#'},
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'}
                }, Room.Direction.UP, Room.Direction.RIGHT),
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', 'c', ' ', ' ', '#', '+', '#'},
                        {'#', '#', '#', '#', '#', '+', '.', '+', ' ', '#'},
                        {' ', ' ', '+', '#', '#', '+', '.', ' ', ' ', ' '},
                        {' ', ' ', '+', '+', '+', ' ', ' ', ' ', ' ', '#'},
                        {'#', ' ', '.', '.', ' ', ' ', ' ', '#', '#', '#'},
                        {'#', '+', '+', '+', ' ', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'}
                }),
                new Template(new char[][] {
                        {'#', '#', '#', '#', ' ', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', ' ', 'c', '#', '#', '#', '#'},
                        {'#', '#', '+', ' ', ' ', ' ', ' ', '#', '#', '#'},
                        {'#', '+', '+', '+', ' ', ' ', ' ', '#', '#', '#'},
                        {'#', '+', '+', '+', '.', '+', '#', '#', '#', '#'},
                        {'#', '+', '+', '+', '.', '+', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', ' ', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', '#', '#'}
                }, Room.Direction.LEFT, Room.Direction.RIGHT),
                new Template(new char[][] {
                        {'#', '#', '#', '#', ' ', '#', '#', '#', '#', '#'},
                        {'#', '#', ' ', ' ', ' ', 'c', '#', '#', '#', '#'},
                        {'#', ' ', ' ', '+', '#', '#', '#', '#', '#', '#'},
                        {'#', '+', '.', '+', '#', '#', '#', '+', ' ', ' '},
                        {'#', '+', '.', '+', '#', '#', '+', '+', ' ', ' '},
                        {'#', '#', ' ', ' ', ' ', '.', '.', ' ', ' ', '#'},
                        {'#', '#', '#', ' ', ' ', '+', '+', ' ', ' ', '#'},
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
                }, Room.Direction.LEFT, Room.Direction.DOWN),
                new Template(new char[][] {
                        {'#', '#', '#', '#', ' ', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', ' ', 'c', '#', '#', '#', '#'},
                        {'#', '#', ' ', ' ', ' ', '#', '#', '#', '#', '#'},
                        {' ', ' ', ' ', ' ', '#', '#', '#', '#', '#', '#'},
                        {' ', ' ', ' ', ' ', '#', '#', '#', '#', '#', '#'},
                        {'#', ' ', ' ', ' ', '#', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', ' ', '#', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
                }, Room.Direction.RIGHT, Room.Direction.DOWN),
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', ' ', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', ' ', ' ', '#', '#', 'c', '#'},
                        {'#', '#', '#', '#', '#', ' ', ' ', ' ', ' ', '#'},
                        {'#', '+', '#', '#', '#', ' ', ' ', ' ', ' ', ' '},
                        {'#', '+', '+', '+', '+', ' ', ' ', ' ', ' ', ' '},
                        {'#', '+', '+', '+', '+', '+', ' ', '#', '#', '#'},
                        {'#', '+', '#', '#', '+', '+', '#', '#', '#', '#'},
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
                }, Room.Direction.LEFT, Room.Direction.DOWN),
                new Template(new char[][] {
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
                        {'#', '#', '#', '+', '+', '#', '#', '#', '#', '#'},
                        {'#', '#', '+', '+', '+', '+', '+', '#', 'c', '#'},
                        {' ', ' ', ' ', '+', '+', '+', '+', '+', ' ', '#'},
                        {'#', ' ', ' ', '.', '.', '.', '.', '.', ' ', ' '},
                        {'#', ' ', '+', '+', '+', '+', '+', '+', ' ', '#'},
                        {'#', '#', '#', '+', '#', '#', '#', '+', '+', '#'},
                        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
                }, Room.Direction.UP, Room.Direction.DOWN),
        };
    }

    @Override
    public void generate() {
        super.generate();

        for (Room r : rooms) {
            for (int x = r.x0(); x < r.x1(); x++) {
                for (int y = r.y0(); y < r.y1(); y++) {
                    if (tiles.at(x, y, 0) != null && tiles.at(x, y, 0).getClass().equals(CaveGround.class)
                            && Game.RANDOM.nextFloat() < .05f) {
                        tiles.set(new CaveMushroom(), x, y, 0);
                    }
                }
            }
        }
    }
}
